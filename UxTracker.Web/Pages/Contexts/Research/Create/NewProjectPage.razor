@page "/projects/new-project"

<AuthorizeView Policy="ResearcherPolicy">
    <MudContainer MaxWidth="MaxWidth.Medium" Class="d-flex flex-column align-items-center gap-4 pa-20">
        <MudText Typo="Typo.h4" Align="Align.Center">Nova pesquisa</MudText>

        <MudPaper Class="pa-4 rounded-lg w-100" Outlined="true">
            <MudForm>
                <MudGrid Spacing="3">
                    <MudItem xs="12">
                        <MudTextField ShrinkLabel="true" T="string" Label="Título" Variant="Variant.Filled" FullWidth="true" />
                    </MudItem>

                    <MudItem xs="12">
                        <MudTextField ShrinkLabel="true" T="string" Label="Descrição" Variant="Variant.Filled" FullWidth="true"
                                      Lines="3" />
                    </MudItem>

                    <MudItem xs="12" sm="6">
                        <MudDatePicker T="DateTime?" Label="Data inicial" Variant="Variant.Filled" />
                    </MudItem>

                    <MudItem xs="12" sm="6">
                        <MudDatePicker T="DateTime?" Label="Data final" Variant="Variant.Filled" />
                    </MudItem>

                    <MudItem xs="12" sm="6">
                        <MudSelect @bind-Value="Period" T="string" Label="Período de tempo" AnchorOrigin="Origin.BottomCenter"
                                   Variant="Variant.Filled">
                            <MudSelectItem Value="@("Diario")">Diario</MudSelectItem>
                            <MudSelectItem Value="@("Mensal")">Mensal</MudSelectItem>
                            <MudSelectItem Value="@("Anual")">Anual</MudSelectItem>
                        </MudSelect>

                    </MudItem>

                    <MudItem xs="12" sm="6" class="d-flex justify-center mt-4">
                        <MudFileUpload T="IBrowserFile" Accept=".pdf" FilesChanged="UploadFiles2" MaximumFileCount="1">
                            <ActivatorContent>
                                <MudButton Variant="Variant.Outlined" Color="Color.Primary"
                                           StartIcon="@Icons.Material.Filled.CloudUpload">
                                    Termo de Aceite (.pdf)
                                </MudButton>
                            </ActivatorContent>
                        </MudFileUpload>
                    </MudItem>

                    <MudItem xs="12">
                        <MudText Typo="Typo.h6">Relatórios</MudText>
                    </MudItem>

                    <MudItem xs="12" sm="6">
                        <MudCheckBox T="bool" Label="Visão geral da evolução das avaliações" />
                        <MudCheckBox T="bool" Label="Avaliações de cada usuário por período" />
                        <MudCheckBox T="bool" Label="Distribuição das avaliações por período" />
                    </MudItem>

                    <MudItem xs="12" sm="6">
                        <MudCheckBox T="bool" Label="Frequências das avaliações por intervalo de tempo" />
                        <MudCheckBox T="bool" Label="Número adequado de clusters de usuários" />
                        <MudCheckBox T="bool" Label="Média da experiência do usuário ao longo do período" />
                    </MudItem>

                    <MudItem xs="12" class="d-flex justify-center mt-4">
                        <MudButton Href="/researchers/home" Variant="Variant.Filled" Color="Color.Secondary" Class="py-2 px-15">
                            Voltar
                        </MudButton>
                        <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" Class="py-2 px-15">
                            Salvar
                        </MudButton>
                    </MudItem>
                </MudGrid>
            </MudForm>
        </MudPaper>
    </MudContainer>
</AuthorizeView>


@if (files != null)
{
    <MudList T="string">
        @foreach (var file in files)
        {
            <MudListItem Icon="@Icons.Material.Filled.AttachFile">
                @file.Name <code>@file.Size bytes</code>
            </MudListItem>
        }
    </MudList>
}
@code
{
    IList<IBrowserFile> files = new List<IBrowserFile>();
    private string Period { get; set; }

    private void UploadFiles2(IBrowserFile file)
    {
        files.Add(file);
    }
}