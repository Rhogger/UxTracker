@using UxTracker.Core.Contexts.Research.DTOs

<MudTable 
    Class="w-full"
    Hover="true" 
    Breakpoint="Breakpoint.Sm" 
    Height="500px" 
    FixedHeader="true"
    Items="@GroupedReviews"
    GroupBy="@_groupDefinition">
    <ColGroup>
        <col style="width: 40px;" />
        <col />
    </ColGroup>
    <HeaderContent>
        <MudTh>Dia</MudTh>
        <MudTh>Coment치rio</MudTh>
    </HeaderContent>
    <GroupHeaderTemplate>
        <MudTh colspan="2" Class="mud-table-cell-custom-group">@($"Usu치rio: {context.Key}")</MudTh>
    </GroupHeaderTemplate>
    <RowTemplate>
        <MudTd DataLabel="Dia">@($"Dia {context.Index + 1}")</MudTd>
        <MudTd DataLabel="Coment치rio">@context.Comment</MudTd>
    </RowTemplate>
</MudTable>

@code {
    [Parameter] public List<ReviewsDto> Reviews { get; set; } = new();

    private TableGroupDefinition<ReviewsDto> _groupDefinition = new()
    {
        GroupName = "Usu치rio",
        Indentation = false,
        Expandable = true,
        IsInitiallyExpanded = false,
        Selector = (review) => review.Email
    };

    private IEnumerable<ReviewsDto> GroupedReviews => Reviews.OrderBy(r => r.Index);
}